# Born2beRoot

**요약:** 이 문서는 시스템 관리와 관련된 연습 과제입니다.

**버전:** 5.2

---

## 목차

| 장 | 제목 | 페이지 |
|-----|------|--------|
| I | 서문 | 2 |
| II | 소개 | 3 |
| III | AI 지침 | 4 |
| IV | 일반 가이드라인 | 6 |
| V | 필수 부분 | 7 |
| VI | README 요구사항 | 12 |
| VII | 보너스 부분 | 14 |
| VIII | 제출 및 피어 평가 | 16 |

---

## 제1장: 서문

> "가상 머신을 통해 당신이 원하는 모든 것을 할 수 있습니다. 이것이 당신의 세상입니다."

---

## 제2장: 소개

이 프로젝트는 가상화의 멋진 세계로 당신을 소개하는 것을 목표로 합니다.

VirtualBox(또는 VirtualBox를 사용할 수 없는 경우 UTM)를 사용하여 특정 지침에 따라 첫 번째 머신을 생성할 것입니다. 그 다음, 이 프로젝트가 끝나면 엄격한 규칙을 구현하면서 자신의 운영체제를 설정할 수 있게 됩니다.

---

## 제3장: AI 지침

### 🔵 Context

이 프로젝트는 당신의 42 교육 과정의 기본 구성 요소를 발견하도록 도움을 주기 위해 설계되었습니다.

핵심 지식과 기술을 제대로 습득하려면 AI 도구와 지원을 사용할 때 신중한 접근을 취해야 합니다.

진정한 기초 학습은 실제 지적 노력을 필요로 합니다 — 도전, 반복, 피어 학습 교환을 통해.

AI에 대한 더 완전한 개요(학습 도구로서, 42 교육의 일부로서, 그리고 직업 시장에서의 기대로서)는 인트라넷의 전용 FAQ를 참조하세요.

### 🔵 주요 메시지

- ☛ 지름길 없이 견고한 기초를 구축하세요.
- ☛ 실제로 기술 & 파워 스킬을 개발하세요.
- ☛ 실제 피어 러닝을 경험하고, 학습 방법과 새로운 문제 해결 방법을 배우세요.
- ☛ 학습 여정이 결과보다 더 중요합니다.
- ☛ AI와 관련된 위험성을 학습하고, 일반적인 함정을 피하기 위한 효과적인 제어 관행과 대책을 개발하세요.

### 🔵 학습자 규칙:

- 특히 AI로 전환하기 전에 할당된 작업에 추론을 적용해야 합니다.
- AI에게 직접적인 답변을 요청하면 안 됩니다.
- 42의 AI에 대한 전체적인 접근 방식을 배워야 합니다.

### 🔵 Phase 성과:

이 기초 단계 내에서 다음과 같은 성과를 얻을 것입니다:

- 적절한 기술과 코딩 기초를 습득합니다.
- 이 단계에서 AI가 왜 위험한지, 어떻게 위험한지를 압니다.

### 🔵 의견 및 예시:

- 그렇습니다, 우리는 AI가 존재한다는 것을 압니다 — 그리고 네, AI는 당신의 프로젝트를 해결할 수 있습니다. 하지만 당신은 AI가 배웠다는 것을 증명하려고 하는 것이 아니라 배우기 위해 여기 있습니다. 주어진 문제를 AI가 해결할 수 있다는 것을 단순히 증명하기 위해 당신의 시간(또는 우리의 시간)을 낭비하지 마세요.

- 42에서의 학습은 답을 아는 것에 관한 것이 아니라 — 하나를 찾을 수 있는 능력을 개발하는 것에 관한 것입니다. AI는 답을 직접 제공하지만, 이는 당신의 자체 추론을 구축하는 것을 방지합니다. 그리고 추론에는 시간, 노력, 실패가 포함됩니다. 성공으로 가는 길은 쉽지 않아야 합니다.

- 시험 중에는 AI를 사용할 수 없다는 것을 명심하세요 — 인터넷 없음, 스마트폰 없음, 등등. 당신이 학습 과정에서 AI에 너무 많이 의존했다면 빨리 깨닫게 될 것입니다.

- 피어 러닝은 당신을 다양한 아이디어와 접근 방식에 노출시켜 대인 관계 기술과 다양하게 생각할 수 있는 능력을 향상시킵니다. 그것은 단순히 봇과 대화하는 것보다 훨씬 더 가치 있습니다. 그래서 부끄러워하지 마세요 — 대화하고, 질문하고, 함께 배우세요!

- 네, AI는 교육 과정의 일부가 될 것입니다 — 학습 도구로서 그리고 그 자체로 주제로서. 당신은 심지어 당신의 자체 AI 소프트웨어를 구축할 기회를 가질 것입니다. 인트라넷에서 제공되는 문서에서 이동할 crescendo 접근 방식에 대해 더 자세히 알아보려면.

#### ✓ 좋은 사례:

> 나는 새로운 개념에 막혔습니다. 근처 사람에게 어떻게 접근했는지 묻습니다. 우리는 10분을 대화합니다 — 그리고 갑자기 이해가 됩니다. 나는 그것을 이해합니다.

#### ✗ 나쁜 사례:

> 나는 몰래 AI를 사용하고, 맞아 보이는 코드를 복사합니다. 피어 평가 중에, 나는 아무것도 설명할 수 없습니다. 나는 실패합니다. 시험 중에 — AI 없음 — 나는 다시 막힙니다. 나는 실패합니다.

---

## 제4장: 일반 가이드라인

- VirtualBox 사용(VirtualBox를 사용할 수 없는 경우 UTM)은 필수입니다.
- 저장소의 루트에 `signature.txt` 파일만 제출하면 됩니다. 머신의 가상 디스크 서명을 여기에 붙여넣어야 합니다. 자세한 내용은 "제출 및 피어 평가" 섹션을 참조하세요.
- 각 평가가 시작될 때 스냅샷이 존재하지 않아야 합니다.

---

## 제5장: 필수 부분

이 프로젝트는 특정 규칙을 따르면서 첫 번째 서버를 설정하는 것으로 구성됩니다.

### ⚠️ 중요

서버를 설정하는 문제이므로 최소한의 서비스 집합을 설치할 것입니다. 이 이유로, 그래픽 인터페이스는 여기에서 유용하지 않습니다. 따라서 X.org, Wayland 또는 기타 동등한 그래픽 서버를 설치하는 것은 금지되어 있습니다. 그렇지 않으면 등급이 0입니다.

### 운영체제 선택

Debian의 최신 안정 버전(테스팅/불안정 없음) 또는 Rocky의 최신 안정 버전 중 하나를 운영체제로 선택해야 합니다. 시스템 관리를 처음 접하는 경우 Debian을 강력히 권장합니다.

### ℹ️ 정보

Rocky 설정은 매우 복잡합니다. 따라서 KDump를 설정할 필요는 없습니다. 그러나 SELinux는 시작 시 실행 중이어야 하고 그 구성은 프로젝트의 필요에 맞게 조정되어야 합니다. Debian용 AppArmor도 시작 시 실행 중이어야 합니다.

### 파티셔닝

LVM을 사용하여 최소 2개의 암호화된 파티션을 생성해야 합니다. 다음은 가능한 파티셔닝의 예입니다:

```
wil@wil:~$ lsblk
NAME                MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
sda                 8:0    0   8G  0 disk
├─sda1              8:1    0  487M 0 part /boot
├─sda2              8:2    0   1K  0 part
└─sda5              8:5    0  7.5G 0 part
  └─sda5_crypt      254:0  0  7.5G 0 crypt
    ├─wil--vg-root  254:1  0  2.8G 0 lvm  /
    ├─wil--vg-swap_1 254:2  0  976M 0 lvm  [SWAP]
    └─wil--vg-home  254:3  0  3.8G 0 lvm  /home
sr0                 11:0   1 1024M 0 rom
wil@wil:~$ _
```

### ℹ️ 정보

방어 중에 선택한 운영체제에 대한 몇 가지 질문을 받을 것입니다. 예를 들어, aptitude와 apt의 차이점, 또는 SELinux 또는 AppArmor가 무엇인지 알아야 합니다. 간단히 말해서, 당신이 사용하는 것을 이해하세요!

### SSH 설정

SSH 서비스는 가상 머신의 포트 4242에서 실행 중이어야 합니다. 보안 상의 이유로, SSH로 루트로 연결할 수 없어야 합니다.

### ℹ️ 정보

SSH 사용은 새 계정을 설정하여 방어 중에 테스트됩니다. 따라서 그것이 어떻게 작동하는지 이해해야 합니다.

### 방화벽 설정

UFW 방화벽(또는 Rocky의 경우 firewalld)으로 운영체제를 구성해야 하고 가상 머신에서 포트 4242만 열어둬야 합니다.

### ℹ️ 정보

예시는 임의의 디스크 크기를 보여줍니다. 적절한 작동을 보장하면서 불필요한 디스크 사용을 피하기 위해 각 파티션에 적절한 크기를 결정해야 합니다.

### ℹ️ 정보

가상 머신을 시작할 때 방화벽이 활성화되어 있어야 합니다. Rocky의 경우, UFW 대신 firewalld를 사용해야 합니다.

### 호스트 이름

가상 머신의 호스트 이름은 42로 끝나는 당신의 로그인이어야 합니다(예: wil42).

피어 리뷰 중에 이 호스트 이름을 수정해야 합니다.

### 사용자 및 그룹

- 강력한 비밀번호 정책을 구현해야 합니다.
- 엄격한 규칙을 따르면서 sudo를 설치하고 구성해야 합니다.
- 루트 사용자 외에, 당신의 로그인을 사용자명으로 가진 사용자가 있어야 합니다.
- 이 사용자는 user42 및 sudo 그룹에 속해야 합니다.

### ℹ️ 정보

피어 리뷰 중에, 새 사용자를 생성하고 그룹에 할당해야 합니다.

### 강력한 비밀번호 정책

강력한 비밀번호 정책을 설정하려면 다음 요구사항을 준수해야 합니다:

- 비밀번호는 30일마다 만료되어야 합니다.
- 비밀번호 변경 간 최소 일수는 2로 설정되어야 합니다.
- 사용자는 비밀번호 만료 7일 전에 경고 메시지를 받아야 합니다.
- 비밀번호는 최소 10자 이상이어야 합니다. 대문자, 소문자, 숫자가 포함되어야 합니다. 또한, 3개 이상의 연속 동일 문자를 포함하면 안 됩니다.
- 비밀번호는 사용자의 이름을 포함하지 않아야 합니다.
- 다음 규칙은 루트 비밀번호에는 적용되지 않습니다: 비밀번호는 이전 비밀번호의 일부가 아닌 최소 7개의 문자를 포함해야 합니다.
- 물론, 당신의 루트 비밀번호도 이 정책을 준수해야 합니다.

### ⚠️ 중요

구성 파일을 설정한 후, 루트 계정을 포함하여 가상 머신에 있는 모든 계정의 비밀번호를 변경해야 합니다.

### Sudo 그룹 설정

강력한 sudo 그룹 구성을 설정하려면 다음 요구사항을 준수해야 합니다:

- sudo를 사용한 인증은 잘못된 비밀번호의 경우 3회 시도로 제한되어야 합니다.
- sudo를 사용할 때 잘못된 비밀번호를 입력하면 당신이 선택한 사용자 정의 메시지를 표시해야 합니다.
- sudo로 수행된 각 작업은 입력과 출력 모두를 포함하여 로깅되어야 합니다. 로그 파일은 `/var/log/sudo/` 폴더에 저장되어야 합니다.
- TTY 모드는 보안상의 이유로 활성화되어야 합니다.
- 보안상의 이유로, sudo에서 사용할 수 있는 경로도 제한되어야 합니다.

예시:
```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin
```

### 모니터링 스크립트

마지막으로, `monitoring.sh`라는 간단한 스크립트를 생성해야 합니다. Bash로 작성되어야 합니다.

서버 시작 시, 스크립트는 아래 나열된 정보를 모든 터미널에 표시하고, 10분마다 표시합니다(wall을 살펴보세요). 배너는 선택 사항입니다. 오류가 표시되지 않아야 합니다.

당신의 스크립트는 항상 다음 정보를 표시할 수 있어야 합니다:

- 운영체제의 아키텍처 및 커널 버전.
- 물리 프로세서의 수.
- 가상 프로세서의 수.
- 현재 사용 가능한 서버 RAM 및 사용률(백분율).
- 현재 사용 가능한 서버 스토리지 및 사용률(백분율).
- 현재 CPU 사용률(백분율).
- 마지막 재부팅의 날짜 및 시간.
- LVM 활성 여부.
- 활성 연결 수.
- 서버를 사용 중인 사용자 수.
- 서버의 IPv4 주소 및 MAC(미디어 액세스 제어) 주소.
- sudo 프로그램으로 실행된 명령의 수.

### ℹ️ 정보

피어 리뷰 중에, 이 스크립트가 어떻게 작동하는지 설명하도록 요청받을 것입니다. 또한 수정 없이 중단해야 합니다. cron을 살펴보세요.

스크립트가 작동하도록 예상되는 방식의 예시:

```
Broadcast message from root@wil (tty1) (Sun Apr 25 15:45:00 2021):
#Architecture: Linux wil 4.19.0-16-amd64 #1 SMP Debian 4.19.181-1 (2021-03-19) x86_64 GNU/Linux
#Physical CPU: 1
#vCPU: 1
#Memory Usage: 74/987MB (7.50%)
#Disk Usage: 1009/2Gb (49%)
#CPU load: 6.7%
#Last boot: 2021-04-25 14:45
#LVM use: yes
#TCP Connections: 1 ESTABLISHED
#User log: 1
#Network: IP 10.0.2.15 (08:00:27:51:9b:a5)
#Sudo: 42 cmd
```

### 확인 명령어

프로젝트의 일부 요구사항을 확인하는 데 사용할 수 있는 두 가지 명령어는 다음과 같습니다:

**Rocky의 경우:**

```bash
[root@wil]# head -n 2 /etc/os-release
NAME="Rocky Linux"
VERSION="8.7 (Green Obsidian)"
[root@wil]# sestatus
SELinux status: enabled
SELinuxfs mount: /sys/fs/selinux
SELinux root directory: /etc/selinux
Loaded policy name: targeted
Current mode: enforcing
Mode from config file: enforcing
Policy MLS status: enabled
Policy deny_unknown status: allowed
Memory protection checking: actual (secure)
Max kernel policy version: 33
[root@wil]# ss -tunlp
Netid State Recv-Q Send-Q Local Address:Port Peer Address:Port Process
tcp LISTEN 0 128 0.0.0.0:4242 0.0.0.0:* users:(("sshd",pid=28429,fd=3))
tcp LISTEN 0 128 [::]:4242 [::]:* users:(("sshd",pid=28429,fd=4))
[root@wil]# firewall-cmd --list-service
ssh
[root@wil]# firewall-cmd --list-port
4242/tcp
[root@wil]# firewall-cmd --state
running
[root@wil]# _
```

**Debian의 경우:**

```bash
root@wil:~# head -n 2 /etc/os-release
PRETTY_NAME="Debian GNU/Linux 10 (buster)"
NAME="Debian GNU/Linux"
root@wil:/home/wil# /usr/sbin/aa-status
apparmor module is loaded.
root@wil:/home/wil# ss -tunlp
Netid State Recv-Q Send-Q Local Address:Port Peer Address:Port
tcp LISTEN 0 128 0.0.0.0:4242 0.0.0.0:* users:(("sshd",pid=523,fd=3))
tcp LISTEN 0 128 [::]:4242 [::]:* users:(("sshd",pid=523,fd=4))
root@wil:/home/wil# /usr/sbin/ufw status
Status: active

To Action From
-- ------ ----
4242 ALLOW Anywhere
4242 (v6) ALLOW Anywhere (v6)

root@wil:/home/wil# _
```

---

## 제6장: README 요구사항

`README.md` 파일은 Git 저장소의 루트에 제공되어야 합니다. 이 파일의 목적은 프로젝트에 익숙하지 않은 사람(피어, 직원, 채용담당자 등)이 프로젝트가 무엇인지, 어떻게 실행하는지, 그리고 주제에 대한 자세한 정보를 찾을 수 있는 위치를 빠르게 이해할 수 있도록 하는 것입니다.

`README.md`는 최소한 다음을 포함해야 합니다:

- 첫 번째 줄은 이탤릭 처리되어야 하며 다음과 같이 읽어야 합니다: *This project has been created as part of the 42 curriculum by <login1>[, <login2>[, <login3>[...]]]*

- "Description" 섹션: 목표와 간단한 개요를 포함하여 프로젝트를 명확하게 제시합니다.

- "Instructions" 섹션: 컴파일, 설치 및/또는 실행에 관한 관련 정보를 포함합니다.

- "Resources" 섹션: 주제와 관련된 고전 참고 자료 목록(문서, 기사, 튜토리얼 등), 그리고 AI가 어떻게 사용되었는지에 대한 설명(어떤 작업과 프로젝트의 어느 부분에 사용되었는지 지정).

➠ 추가 섹션이 필요할 수 있습니다(예: 사용 예시, 기능 목록, 기술적 선택 등).

필요한 추가 사항은 아래에 명시적으로 나열됩니다.

- **Project description 섹션**: 운영체제 선택(Debian 또는 Rocky)을 설명해야 하며, 각각의 장점과 단점을 포함합니다. 설정 중에 수행된 주요 설계 선택사항(파티셔닝, 보안 정책, 사용자 관리, 설치된 서비스)을 설명해야 합니다. 그리고 다음 사이의 비교를 제공해야 합니다:

  - Debian vs Rocky Linux
  - AppArmor vs SELinux
  - UFW vs firewalld
  - VirtualBox vs UTM

💡 영어를 권장합니다; 또는, 캠퍼스의 주요 언어를 사용할 수 있습니다.

---

## 제7장: 보너스 부분

보너스 기능:

- 파티션을 올바르게 설정하여 다음과 유사한 구조를 얻으세요:

```
# lsblk
NAME                            MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
sda                             8:0    0   30.8G 0 disk
├─sda1                          8:1    0   500M 0 part /boot
├─sda2                          8:2    0   1K   0 part
└─sda5                          8:5    0   30.3G 0 part
  └─sda5_crypt                  254:0  0   30.3G 0 crypt
    ├─LVMGroup-root             254:1  0   10G  0 lvm  /
    ├─LVMGroup-swap             254:2  0   2.3G 0 lvm  [SWAP]
    ├─LVMGroup-home             254:3  0   5G   0 lvm  /home
    ├─LVMGroup-var              254:4  0   3G   0 lvm  /var
    ├─LVMGroup-srv              254:5  0   3G   0 lvm  /srv
    ├─LVMGroup-tmp              254:6  0   3G   0 lvm  /tmp
    └─LVMGroup-var--log         254:7  0   4G   0 lvm  /var/log
sr0                             11:0   1   1024M 0 rom
```

- lighttpd, MariaDB, PHP의 다음 서비스로 기능하는 WordPress 웹사이트를 설정하세요.

- 당신이 유용하다고 생각하는 서비스를 선택하여 설정하세요(NGINX / Apache2 제외!). 방어 중에, 당신의 선택을 정당화해야 합니다.

### ℹ️ 정보

예시는 임의의 디스크 크기를 보여줍니다. 적절한 작동을 보장하면서 불필요한 디스크 사용을 피하기 위해 각 파티션에 적절한 크기를 결정해야 합니다.

### ℹ️ 정보

보너스 부분을 완료하려면, 추가 서비스를 설정할 수 있습니다. 이 경우, 당신의 필요에 맞게 더 많은 포트를 열 수 있습니다. 물론, UFW/firewalld 규칙을 그에 따라 조정해야 합니다.

### ⚠️ 중요

보너스 부분은 필수 부분이 PERFECT인 경우에만 평가됩니다. Perfect는 필수 부분이 완전히 완료되고 어떤 오작동 없이 작동한다는 의미입니다. 모든 필수 요구사항을 통과하지 못한 경우, 보너스 부분은 평가되지 않습니다.

---

## 제8장: 제출 및 피어 평가

저장소의 루트에 예상되는 `README.md` 파일과 `signature.txt` 파일만 제출하면 됩니다. 머신의 가상 디스크 서명을 이 파일에 붙여넣어야 합니다. 이 서명을 얻으려면, 먼저 기본 설치 폴더(VM이 저장된 폴더)를 열어야 합니다:

- **Windows:** `%HOMEDRIVE%%HOMEPATH%\VirtualBox VMs\`
- **Linux:** `~/VirtualBox VMs/`
- **MacM1:** `~/Library/Containers/com.utmapp.UTM/Data/Documents/`
- **MacOS:** `~/VirtualBox VMs/`

그 다음, 가상 머신의 ".vdi" 파일(또는 UTM 사용자의 경우 ".qcow2")에서 sha1 형식의 서명을 검색하세요. 다음은 `rocky_serv.vdi` 파일에 대한 4가지 명령어 예시입니다:

- **Windows:** `certUtil -hashfile rocky_serv.vdi sha1`
- **Linux:** `sha1sum rocky_serv.vdi`
- **Mac M1:** `shasum rocky.utm/Images/disk-0.qcow2`
- **MacOS:** `shasum rocky_serv.vdi`

이것은 당신이 얻을 출력의 예시입니다:

```
6e657c4619944be17df3c31faa030c25e43e40af
```

### ℹ️ 정보

가상 머신을 다시 시작하는 순간 가상 머신의 서명이 변경된다는 점에 유의하세요. 모든 평가에 대한 서명 확인을 허용하려면, 가상 머신 디스크 파일을 복제하거나 각 평가에 대해 스냅샷을 사용할 수 있습니다.

### ⚠️ 중요

물론, 가상 머신을 Git 저장소에 포함시키는 것은 금지되어 있습니다. 방어 중에, `signature.txt` 파일의 서명이 가상 머신의 서명과 비교될 것입니다. 둘이 동일하지 않으면, 등급이 0입니다.

### ⚠️ 중요

스냅샷 사용은 제한됩니다. 각 방어는 어떤 스냅샷 없이 시작되어야 합니다. 그 다음 방어 전용 스냅샷이 생성되고 방어 끝에 삭제됩니다. 프로젝트를 제출하기 전에 스냅샷 기능으로 테스트해보시기를 권장합니다.

### 평가 중 수정

평가 중에, 프로젝트의 간단한 수정이 요청될 수 있습니다. 이것은 작은 행동 변화, 작성하거나 다시 작성할 몇 줄의 코드, 또는 추가하기 쉬운 기능을 포함할 수 있습니다.

이 단계가 모든 프로젝트에 적용되지 않을 수 있지만, 평가 가이드라인에서 언급된 경우 이를 대비해야 합니다.

이 단계는 프로젝트의 특정 부분에 대한 실제 이해를 확인하기 위해 고안되었습니다. 수정은 당신이 선택한 개발 환경에서 수행할 수 있으며(예: 당신의 일반적인 설정), 특정 시간 프레임이 평가의 일부로 정의되지 않은 한 몇 분 내에 완료될 수 있어야 합니다.

예를 들어, 함수 또는 스크립트에 작은 업데이트, 디스플레이 수정, 또는 새로운 정보를 저장하기 위해 데이터 구조를 조정하도록 요청받을 수 있습니다, 등등.

세부사항(범위, 대상, 등)은 평가 가이드라인에서 지정되며 동일한 프로젝트에 대해 한 평가에서 다른 평가로 달라질 수 있습니다.
